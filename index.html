<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Body Shape Detector</title>
</head>
<body>
  <h1>🧍‍♀️ Body Shape Detector</h1>
  <input type="file" accept="image/*" id="imageUpload"/>
  <br/><br/>
  <div id="predictionResult"></div>

  <!-- Teachable Machine Library -->
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

  <script>
    let model, prediction;

    async function loadModel() {
      const URL = "https://raw.githubusercontent.com/marwajawad/body-shape-detector/main/model/";
      model = await tmImage.load(URL + "model.json", URL + "weights.bin");
      console.log("✅ Model loaded successfully");
    }

    async function predictImage(file) {
      const image = new Image();
      image.src = URL.createObjectURL(file);
      await new Promise(resolve => image.onload = resolve);

      const prediction = await model.predict(image);
      const resultDiv = document.getElementById("predictionResult");

      const sorted = prediction.sort((a, b) => b.probability - a.probability);
      const top = sorted[0];

      resultDiv.innerHTML = `<h2>🔍 Prediction: ${top.className}</h2>
                             <p>Confidence: ${(top.probability * 100).toFixed(2)}%</p>`;
    }

    document.getElementById("imageUpload").addEventListener("change", (event) => {
      const file = event.target.files[0];
      if (file && model) {
        predictImage(file);
      }
    });

    window.onload = loadModel;
  </script>
</body>
</html>

